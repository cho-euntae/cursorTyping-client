(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6630:(e,t,s)=>{Promise.resolve().then(s.bind(s,8152))},8152:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var l=s(5155),n=s(2115),a=s(1319),r=s(5565);let c=["오늘은 날씨가 참 좋네요.","나는 매일 아침 커피를 마십니다.","고양이는 창밖을 바라보고 있어요.","프론트엔드 개발은 재미있지만 가끔 헷갈려요.","운동을 하면 기분이 좋아져요.","모든 일에는 때가 있는 법이죠.","시간은 누구에게나 공평해요.","책을 읽는 건 마음의 양식을 쌓는 일이에요.","지하철은 출근 시간에 너무 혼잡해요.","저녁 노을이 정말 예쁘네요."];function i(){let[e,t]=(0,n.useState)(""),[s,i]=(0,n.useState)(""),[o,d]=(0,n.useState)(null),[u,m]=(0,n.useState)(0),[h,x]=(0,n.useState)(0),[g,p]=(0,n.useState)(100),[f,j]=(0,n.useState)(""),[v,N]=(0,n.useState)(""),[b,w]=(0,n.useState)(!1),[y,S]=(0,n.useState)({cpm:0,wpm:0,accuracy:100}),[k,C]=(0,n.useState)(30),[_,E]=(0,n.useState)(0),[M,R]=(0,n.useState)("ko"),D=(0,n.useRef)(null),I=(0,n.useRef)(null),T=(0,n.useRef)(null),[P,F]=(0,n.useState)([]),[L,O]=(0,n.useState)(""),[q,z]=(0,n.useState)("");async function K(){if(console.log(M),"ko"===M)return c[Math.floor(Math.random()*c.length)];{let e=await fetch("https://api.quotable.io/random");return(await e.json()).content}}(0,n.useEffect)(()=>(I.current=(0,a.io)("".concat("http://localhost",":").concat("4000")),I.current.on("connect",()=>{console.log("Connected to server")}),I.current.on("newMessage",e=>{console.log("Received new message:",e),F(t=>[...t,e])}),K().then(e=>t(e)),I.current.on("userProgress",e=>{S({cpm:e.cpm,wpm:e.wpm,accuracy:e.accuracy})}),()=>{var e;null===(e=I.current)||void 0===e||e.disconnect()}),[]),(0,n.useEffect)(()=>{s.length===e.length&&(alert("타이핑 완료!\n타이핑 속도: ".concat(u,"타/분\n정확도: ").concat(g,"%\n총 타이핑 속도: ").concat(h,"타/분")),i(""),d(null),m(0),x(0),p(100),K().then(e=>t(e)))},[s,e]),(0,n.useEffect)(()=>{0===k&&(T.current&&clearInterval(T.current),alert("시간 종료!\n총 입력한 단어 수: ".concat(_,"\n타이핑 속도: ").concat(u,"타/분\n정확도: ").concat(g,"%")),i(""),d(null),m(0),x(0),p(100),C(30),E(0),K().then(e=>t(e)))},[k]);let A=()=>{T.current&&clearInterval(T.current),C(30),T.current=setInterval(()=>{C(e=>e-1)},1e3)},B=()=>{if(L.trim()&&q.trim()&&f){var e;console.log("Sending message:",{roomId:f,message:L,username:q}),null===(e=I.current)||void 0===e||e.emit("chatMessage",{roomId:f,message:L,username:q}),O("")}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("header",{className:"flex h-[60] px-10 w-full center",children:[(0,l.jsx)("div",{className:"logo flex center",children:(0,l.jsxs)("a",{href:"/",className:"flex items-center",children:[(0,l.jsx)(r.default,{className:"block",src:"/typing_logo.png",alt:"Logo",width:50,height:50}),(0,l.jsx)("span",{className:"font-bold text-2xl",children:"Typing Speed Test"})]})}),(0,l.jsx)("div",{className:"flex-1 menu ml-10 items-center h-full",children:(0,l.jsx)("ul",{className:"flex min-w-[300px] h-full items-center font-600 list-none",children:["타이핑 테스트","키 스트로크 연습","고급"].map((e,t)=>(0,l.jsx)("li",{className:"p-2 flex relative center cursor-pointer",children:(0,l.jsx)("a",{children:e})},t))})}),(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)("button",{onClick:()=>{R(e=>"ko"===e?"en":"ko"),K().then(e=>t(e)),i(""),d(null),m(0),x(0),p(100),C(30),E(0)},className:"px-4 py-2 bg-gray-500 text-white rounded-lg",children:"ko"===M?"한국어":"English"})})]}),(0,l.jsxs)("div",{className:"grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8 pb-20 gap-16 sm:p-20 font-[family-name:var(--font-geist-sans)]",children:[(0,l.jsx)("main",{className:"flex flex-col gap-8 row-start-2 items-center sm:items-start",children:(0,l.jsxs)("div",{className:"z-10 max-w-5xl w-full items-center justify-between font-mono text-sm",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold mb-8 text-center",children:"Test"}),!f&&(0,l.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,l.jsx)("button",{onClick:()=>{var e,s,l;if(!v.trim()){alert("방 ID를 입력해주세요!");return}j(v),w(!0),console.log("createRoom: ".concat(f,", socket.id: ").concat(null===(e=I.current)||void 0===e?void 0:e.id)),null===(s=I.current)||void 0===s||s.emit("createRoom",v),null===(l=I.current)||void 0===l||l.emit("joinRoom",v),K().then(e=>t(e)),i(""),d(null),m(0),x(0),p(100),C(30),E(0)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg",children:"방 만들기"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),placeholder:"방 ID 입력",className:"px-4 py-2 border rounded-lg"}),(0,l.jsx)("button",{onClick:()=>{if(v){var e;null===(e=I.current)||void 0===e||e.emit("joinRoom",v),j(v),w(!1)}},className:"px-4 py-2 bg-green-500 text-white rounded-lg",children:"참가하기"})]})]}),f&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mb-4 text-center",children:[(0,l.jsxs)("div",{className:"text-2xl font-bold",children:[k,"초"]}),(0,l.jsxs)("div",{className:"text-lg",children:["입력한 단어 수: ",_]})]}),(0,l.jsx)("div",{className:"mb-8 p-4 border rounded-lg bg-gray-50 w-full max-w-2xl h-32 overflow-y-auto",children:(0,l.jsx)("p",{className:"text-lg whitespace-pre-wrap",children:e.split("").map((e,t)=>{let n="";return t<s.length&&(n=s[t]===e?"text-green-500":"text-red-500"),(0,l.jsx)("span",{className:n,children:e},t)})})}),(0,l.jsx)("div",{className:"flex justify-center mb-8 w-full max-w-2xl",children:(0,l.jsx)("input",{ref:D,type:"text",value:s,onChange:t=>{var s,l;let n=t.target.value;o||(d(Date.now()),A(),null===(s=I.current)||void 0===s||s.emit("startTyping",f)),E(n.trim().split(/\s+/).length),i(n);let a=n.split("").filter((t,s)=>t===e[s]).length/n.length*100;if(p(Math.round(a)),o){let t=(Date.now()-o)/6e4,s=Math.round(n.length/t);m(s);let r=Math.round(n.length/t);x(r),null===(l=I.current)||void 0===l||l.emit("typingProgress",{roomId:f,progress:n.length/e.length,cpm:s,wpm:r,accuracy:Math.round(a)})}},className:"w-full p-2 border rounded-lg",placeholder:"여기에 입력하세요..."})}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-8 text-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"font-bold mb-2",children:"나의 통계"}),(0,l.jsxs)("div",{children:["타이핑 속도: ",u,"타/분"]}),(0,l.jsxs)("div",{children:["총 타이핑 속도: ",h,"타/분"]}),(0,l.jsxs)("div",{children:["정확도: ",g,"%"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"font-bold mb-2",children:"상대방 통계"}),(0,l.jsxs)("div",{children:["타이핑 속도: ",y.cpm,"타/분"]}),(0,l.jsxs)("div",{children:["총 타이핑 속도: ",y.wpm,"타/분"]}),(0,l.jsxs)("div",{children:["정확도: ",y.accuracy,"%"]})]})]}),(0,l.jsx)("div",{className:"fixed bottom-4 right-4 w-80 bg-white rounded-lg shadow-lg p-4",children:(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("input",{type:"text",value:q,onChange:e=>z(e.target.value),placeholder:"사용자 이름",className:"w-full p-2 border rounded-lg mb-2"}),(0,l.jsx)("div",{className:"h-48 overflow-y-auto mb-2 border rounded-lg p-2",children:P.map((e,t)=>(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsxs)("span",{className:"font-bold",children:[e.username,": "]}),(0,l.jsx)("span",{children:e.message}),(0,l.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:new Date(e.timestamp).toLocaleTimeString()})]},t))}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",value:L,onChange:e=>O(e.target.value),onKeyPress:e=>"Enter"===e.key&&B(),placeholder:"메시지를 입력하세요...",className:"flex-1 p-2 border rounded-lg"}),(0,l.jsx)("button",{onClick:B,className:"px-4 py-2 bg-blue-500 text-white rounded-lg",children:"전송"})]})]})})]})]})}),(0,l.jsx)("footer",{className:"row-start-3 flex gap-6 flex-wrap items-center justify-center",children:"Footer"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[547,441,517,358],()=>t(6630)),_N_E=e.O()}]);